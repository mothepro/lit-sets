<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="color-scheme" content="light dark">
  <title>Mo's Sets</title>
  <script type="importmap-shim" src="import-map.json"></script>
  <link rel="stylesheet" href="light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
  <link rel="stylesheet" href="dark.css" media="(prefers-color-scheme: dark)">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
  <link rel="stylesheet" href="style.css" />
  <!-- Production -->
  <script prod-only type=prod-only-module
    src="//unpkg.com/es-module-shims@0.4.6/dist/es-module-shims.min.js"></script>
  <script prod-only type=prod-only-module-shim src="//unpkg.com/@mothepro/lit-sets/dist/esm/demo/index.js"></script>
  <script prod-only type=prod-only-application/javascript async
    src="https://www.googletagmanager.com/gtag/js?id=UA-172429940-1"></script>
  <!-- Development -->
  <script dev-only type=application/javascript src="//unpkg.com/typescript/lib/typescript.js"></script>
  <script dev-only type=module src="//unpkg.com/@mothepro/es-module-shims@0.0.0/dist/es-module-shims.min.js"></script>
  <script dev-only type=module-shim src="./index.ts"></script>
</head>

<body first-visit theme-toggle-key="theme" first-visit-help-delay="10000">
  <h1 class="title">
    Sets
    <span class="subtitle">by Mo</span>
  </h1>

  <lit-p2p
    fallback
    local-storage
    max-peers="5"
    signaling="wss://ws.parkshade.com:443"
    version="0.3.2"
    timeout="25000"
    lobby="lit-sets@0.0.2"
    stuns='[
      "stun:stun.stunprotocol.org",
      "stun:stun.l.google.com:19302",
      "stun:stun1.l.google.com:19302",
      "stun:stun2.l.google.com:19302",
      "stun:stun3.l.google.com:19302",
      "stun:stun4.l.google.com:19302"
    ]'>
    <div class="loading p2p-default-state">
      <div></div>
      <div></div>
    </div>

    <div slot="p2p-offline" class="loading p2p-offline">
      <div></div>
      <div></div>
    </div>

    <div slot="p2p-loading" class="loading p2p-loading">
      <div></div>
      <div></div>
    </div>

    <div class="top-icons">
      <mwc-button
        raised
        toggle-online-btn
        class="first-visit p2p-disconnected mt6px"
        trailingIcon
        icon="groups"
        label="Play with friends"
      ></mwc-button>
      <mwc-icon-button
        toggle-online-btn
        icon="groups"
        class="not-first-visit p2p-disconnected"
        title="Play with friends"
        label="Play with friends"
      ></mwc-icon-button>
      <mwc-button
        raised
        toggle-online-btn
        class="first-visit p2p-lobby mt6px"
        trailingIcon
        icon="person"
        label="Play solo"
      ></mwc-button>
      <mwc-icon-button
        toggle-online-btn
        icon="person"
        class="not-first-visit p2p-lobby"
        title="Play solo"
        label="Play solo"
      ></mwc-icon-button>
      <mwc-icon-button
        icon="help"
        label="How to Play"
        title="How to Play"
      ></mwc-icon-button>
      <a
        title="Improve this game"
        target="_blank"
        href="https://docs.google.com/forms/d/e/1FAIpQLSfRwls4DV8N1DdDqfx9WMc59OIUep0sMhaY9vT_pUBC4rc-FA/viewform">
        <mwc-icon-button
          icon="feedback"
          label="Send feedback"
        ></mwc-icon-button>
      </a>
      <theme-toggle persistent>
        <mwc-icon-button
          slot="dark"
          icon="brightness_5"
          label="Switch to light theme"
          title="Switch to light theme"
        ></mwc-icon-button>
        <mwc-icon-button
          slot="light"
          icon="nightlight"
          label="Switch to dark theme"
          title="Switch to dark theme"
        ></mwc-icon-button>
      </theme-toggle>
    </div>

    <span class="p2p-lobby next-to-lobby">You're playing as</span>
    <br slot="p2p-lobby" class="p2p-lobby" />

    <p2p-sets slot="p2p-disconnected"></p2p-sets>
    <p2p-sets slot="p2p-ready"></p2p-sets>

    <mwc-dialog heading="How to Play" hideActions>
    </mwc-dialog>
  </lit-p2p>
</body>

<script>
  window.dataLayer = window.dataLayer || []
  function gtag() { dataLayer.push(arguments) }
  gtag('js', new Date())
  gtag('config', 'UA-172429940-2')

  document.body.firstElementChild.addEventListener('p2p-error', error => {
    console.error('Lost connection', error)
    ga('send', 'exception', {
      exDescription: `${error.message} -- ${error.stack}`,
      exFatal: false, // idk...
    })
  })
</script>

</html>
