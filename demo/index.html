<!DOCTYPE html>
<html lang="en">

<head>
  <title>Sets by Mo &bull; Realtime Puzzle Card Game</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- <meta name="color-scheme" content="light dark"> Not supported yet, causes feedback form to break... WTF -->
  <meta name="description" content="Mo's take on the classic card game with multiplayer">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#673ab7">
  <meta name="msapplication-TileColor" content="#603cba">
  <meta name="theme-color" content="#673ab7">
  <script type="importmap-shim" src="import-map.json"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="dark.css" media="(prefers-color-scheme: dark)">
  <!-- Production -->
  <script prod-only type=prod-only-module
    src="//unpkg.com/es-module-shims@0.4.6/dist/es-module-shims.min.js"></script>
  <script prod-only type=prod-only-module-shim src="//unpkg.com/@mothepro/lit-sets@0.0.19/dist/esm/demo/index.js"></script>
  <script prod-only type=prod-only-application/javascript async
    src="https://www.googletagmanager.com/gtag/js?id=UA-172429940-2"></script>
  <script prod-only type=prod-only-application/javascript async
    src="//platform-api.sharethis.com/js/sharethis.js#property=603c0541ae08f90011442468&product=inline-share-buttons"></script>
  <script>
    window.dataLayer = window.dataLayer || []
    function gtag() { dataLayer.push(arguments) }
    gtag('js', new Date)
    gtag('config', 'UA-172429940-2')
  </script>
  <!-- Development -->
  <script dev-only type=application/javascript src="//unpkg.com/typescript/lib/typescript.js"></script>
  <script dev-only type=module src="//unpkg.com/@mothepro/es-module-shims@0.0.0/dist/es-module-shims.min.js"></script>
  <script dev-only type=module-shim src="./index.ts"></script>
</head>

<body first-visit
  astroturf-player-range="[2,5]"
  astroturf-difficulty-range="[5,10]"
  astroturf>
  <lit-p2p
    fallback
    local-storage
    max-peers="5"
    signaling="ws://localhost:12345"
    version="0.3.3"
    retries="-1"
    timeout="25000"
    lobby="lit-sets@0.0.19"
    stuns='[
      "stun:stun.stunprotocol.org",
      "stun:stun.l.google.com:19302",
      "stun:stun1.l.google.com:19302",
      "stun:stun2.l.google.com:19302",
      "stun:stun3.l.google.com:19302",
      "stun:stun4.l.google.com:19302"
    ]'>
    <h1 class="title">
      Sets
      <small>by <span class="signature">Mo</span></small>
    </h1>
    <a
      href="//github.com/mothepro/lit-sets"
      target="_blank"
      class="corner-ribbon"
      title="Come again! Updates are frequent"
    >Beta</a>
    <noscript>Requires Javascript to play!</noscript>
    <div class="loading centered p2p-default-state"><div></div><div></div></div>
    <div slot="p2p-offline" class="loading centered p2p-offline"><div></div><div></div></div>
    <div slot="p2p-loading" class="loading centered p2p-loading"><div></div><div></div></div>
    <header>
      <mwc-icon-button
        open-dialog="menu"
        icon="menu"
        track-click="menu"
      ></mwc-icon-button>
      <mwc-menu dropdown id="menu">
        <mwc-list-item open-dialog="help" graphic="icon">
          <mwc-icon slot="graphic" label="help">help</mwc-icon>
          How to play
        </mwc-list-item>
        <theme-toggle persistent>
          <mwc-list-item slot="dark" graphic="icon">
            <mwc-icon slot="graphic">brightness_5</mwc-icon>
            Switch to light theme
          </mwc-list-item>
          <mwc-list-item slot="light" graphic="icon">
            <mwc-icon slot="graphic">nightlight</mwc-icon>
            Switch to dark theme
          </mwc-list-item>
        </theme-toggle>
        <a hide-offline target="_blank" href="//discord.gg/vrDUqr9P3s">
          <mwc-list-item graphic="icon">
            <mwc-icon  slot="graphic" label="Discord">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 245 240" style="max-width: 24px; max-height: 24px;">
                <path d="M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"/>
                <path d="M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"/>
              </svg>
            </mwc-icon>
            Join the community
          </mwc-list-item>
        </a>
        <mwc-list-item hide-offline open-dialog="feedback" graphic="icon">
          <mwc-icon slot="graphic" label="Send feedback">feedback</mwc-icon>
          Improve this game
        </mwc-list-item>
        <mwc-list-item open-dialog="keyboard" graphic="icon" class="desktop-only">
          <mwc-icon slot="graphic">keyboard</mwc-icon>
          Keyboard shortcuts
        </mwc-list-item>
        <a href="//github.com/mothepro/lit-sets" target="_blank">
          <mwc-list-item graphic="icon">
            <mwc-icon slot="graphic">code</mwc-icon>
            Source code
          </mwc-list-item>
        </a>
        <li divider role="separator"></li>
        <mwc-list-item noninteractive>
          <div class="sharethis-inline-share-buttons"></div>
        </mwc-list-item>
      </mwc-menu>
      <mwc-icon-button
        hidden
        icon="download"
        label="Install"
        title="Install"
      ></mwc-icon-button>
      <mwc-button
        raised
        toggle-online
        trailingIcon
        hide-offline
        class="p2p-disconnected"
        icon="groups"
        label="Multiplayer"
      ></mwc-button>
      <mwc-button
        raised
        toggle-online
        trailingIcon
        class="p2p-lobby"
        icon="person"
        label="Singleplayer"
      ></mwc-button>
    </header>

    <mwc-textfield
      hidden
      outlined
      class="p2p-lobby"
      readonly
      label="Share"
      placeholder="https://sets.momos.games#multiplayer"
    ></mwc-textfield>

    <span class="p2p-lobby next-to-lobby">You're playing as</span>
    <!-- <span slot="p2p-lobby" class="p2p-lobby">in <mwc-fab extended icon="speed" label="Novice difficulty"></mwc-fab></span> -->

    <p2p-sets 
      easy-mode
      class="p2p-disconnected-or-ready" 
      score-gain-initial="100"
      ban-cost-initial="50"
      hint-cost-initial="15"
      hint-cost-increment="5"
    >
      <!-- Is this needed if you have played before? -->
      <div slot="no-singleplayer-score" class="easy-mode">
        Choose 3 cards that have all the same <b>or</b> all different
        <span>
          <strong>color</strong>
          <strong>shape</strong>
          <strong>quantity</strong>
        </span>
        <br>
        <mwc-list noninteractive>
          <mwc-list-item graphic="avatar">
            Gives a hint
            <mwc-icon slot="graphic">lightbulb</mwc-icon>
          </mwc-list-item>
          <mwc-list-item graphic="avatar">
            Shows guide
            <span class="desktop-only">&amp; keyboard shortcuts</span>
            <mwc-icon slot="graphic">help</mwc-icon>
          </mwc-list-item>
          <mwc-list-item graphic="avatar">
            Changes difficulty
            <mwc-icon slot="graphic">speed</mwc-icon>
          </mwc-list-item>
        </mwc-list>
      </div>
      <div slot="game-over" class="easy-mode">
        Ready for a challenge?
        <br>
        <mwc-fab
          extended 
          icon="speed" 
          label="Hard difficulty" 
          onclick="document.querySelector('p2p-sets').removeAttribute('easy-mode')"
        ></mwc-fab>
      </div>
      <div slot="pre-tip-text" class="corner-ribbon" style="z-index: -1">Tip</div>
      <span slot="pre-tip-text">The selected cards have</span>
      <div slot="post-tip-text">Meaning, to complete the set, you need to find &amp; select</div>
    </p2p-sets>
    
    <mwc-list hidden rootTabbable slot="p2p-alone" class="p2p-lobby client-list" multi></mwc-list>
    <mwc-fab
      icon="done"
      label="Make Group"
      slot="p2p-alone"
      selected="0"
      class="make-group p2p-lobby"
    ></mwc-fab>

    <span slot="p2p-alone" class="astroturf-default p2p-lobby centered-text" style="line-height: 3em">
      Waiting for players to join&hellip;
      <br />
      Invite your friends
      <mwc-icon-button
        toggle-hidden="share"
        icon="share"
        label="Share Sets by Mo"
        title="Share Sets by Mo"
      ></mwc-icon-button>
    </span>
    <div slot="p2p-alone" class="astroturf-default p2p-lobby centered loading"><div></div><div></div></div>

    <mwc-dialog id="feedback">
      <iframe
        src="//docs.google.com/forms/d/e/1FAIpQLSfRwls4DV8N1DdDqfx9WMc59OIUep0sMhaY9vT_pUBC4rc-FA/viewform?embedded=true"
        allowtransparency
        scrolling="no"
        width="640"
        height="750"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
      >Loading…</iframe>
      <mwc-icon-button slot="primaryAction" dialogAction="close" icon="clear"></mwc-icon-button>
    </mwc-dialog>

    <mwc-dialog id="keyboard" heading="Keyboard Shortcuts">
      <mwc-list noninteractive>
        <mwc-list-item hasMeta>
          Hightlight the next card
          <span slot="meta">Tab</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Hightlight the previous card
          <span slot="meta">⬆️Tab</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Select the hightlighted card
          <span slot="meta">Space</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Take selected cards as a set
          <span slot="meta">Enter</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Get a hint
          <span slot="meta">H</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Show / Hide the elapsed time
          <span slot="meta">C</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Rearrange cards on screen
          <span slot="meta">R</span>
        </mwc-list-item>
        <mwc-list-item hasMeta>
          Show keyboard shortcuts
          <span slot="meta">?</span>
        </mwc-list-item>
      </mwc-list>
      <mwc-icon-button
        slot="primaryAction"
        dialogAction="close"
        icon="done"
      ></mwc-icon-button>
    </mwc-dialog>

    <mwc-dialog id="help" heading="Welcome to Sets by Mo">
      <p>
        This is a web version of the reflex card game
        <a href="https://en.wikipedia.org/wiki/Set_(card_game)" target="_blank">
          <mwc-button dense trailingIcon icon="open_in_new">Set</mwc-button>
        </a>
        designed by Marsha Falco in 1974.
      </p>

      <p>The goal is to take cards on the screen in groups of 3, known as sets.</p>

      <p>
        The standard deck contains 81 cards each one with 4 unique features: color, shape, opacity, and quantity.
        Here you can see some cards and their features.
      </p>
      
      <div class="card-table">
        <sets-card
          opacity="0"
          color="0"
          shape="2"
          quantity="0"
        ></sets-card>
        <table>
          <tr>
            <th class="key">Feature</th>
            <th class="value">Value</th>
          </tr>
          <tr>
            <td class="key">Quantity</td>
            <td class="value">1</td>
          </tr>
          <tr>
            <td class="key">Color</td>
            <td class="value">Blue</td>
          </tr>
          <tr>
            <td class="key">Shape</td>
            <td class="value">Triangle</td>
          </tr>
          <tr>
            <td class="key">Opacity</td>
            <td class="value">Solid</td>
          </tr>
        </table>

        <sets-card
          opacity="1"
          color="1"
          shape="0"
          quantity="1"
        ></sets-card>
        <table>
          <tr>
            <th class="key">Feature</th>
            <th class="value">Value</th>
          </tr>
          <tr>
            <td class="key">Quantity</td>
            <td class="value">2</td>
          </tr>
          <tr>
            <td class="key">Color</td>
            <td class="value">Yellow</td>
          </tr>
          <tr>
            <td class="key">Shape</td>
            <td class="value">Square</td>
          </tr>
          <tr>
            <td class="key">Opacity</td>
            <td class="value">Translucent</td>
          </tr>
        </table>

        <sets-card
          opacity="2"
          color="2"
          shape="1"
          quantity="2"
        ></sets-card>
        <table>
          <tr>
            <th class="key">Feature</th>
            <th class="value">Value</th>
          </tr>
          <tr>
            <td class="key">Quantity</td>
            <td class="value">3</td>
          </tr>
          <tr>
            <td class="key">Color</td>
            <td class="value">Red</td>
          </tr>
          <tr>
            <td class="key">Shape</td>
            <td class="value">Circle</td>
          </tr>
          <tr>
            <td class="key">Opacity</td>
            <td class="value">Empty</td>
          </tr>
        </table>
      </div>

      <p>
        A set is a combination of 3 cards where each of the 4 features are either <b>all the same</b> or <b>all different</b>.
        For example, the three cards shown above form a set, because each feature is expressed in all the cards.
        You can also have sets where some features are different and others are the same.
      </p>
    
      <p>
        In the example below, the three cards are identical in opacity, <i>solid</i>, and color, <i>blue</i>, while
        being different in quantity and shape.
      </p>

      <div class="set">
        <sets-card
          interactive
          color="0"
          quantity="0"
          shape="2"
          opacity="0"
        ></sets-card>
        <sets-card
          interactive
          color="0"
          quantity="1"
          shape="1"
          opacity="0"
        ></sets-card>
        <sets-card
          interactive
          color="0"
          quantity="2"
          shape="0"
          opacity="0"
        ></sets-card>
      </div>

      <p>
        However, a group of 3 cards needs to be correct in all four features to be a set. The three cards below do not form a
        set, due to their color. Two of the cards are yellow while the third is red, so the three colors are <b>neither</b>
        all the same, nor all different.
      </p>
      
      <div class="set">
        <sets-card
          interactive
          color="2"
          quantity="0"
          shape="1"
          opacity="0"
        ></sets-card>
        <sets-card
          interactive
          color="1"
          quantity="1"
          shape="1"
          opacity="1"
        ></sets-card>
        <sets-card
          interactive
          color="1"
          quantity="2"
          shape="1"
          opacity="2"
        ></sets-card>
      </div>

      <p>
        When the game starts 9 cards are dealt from the deck. When a player takes a set, it is replaced on screen by
        3 new cards from the deck. The game ends when the deck is empty and no more sets are available.
      </p>

      <p>
        Sometimes, there will not be any sets among the 12 cards on screen. In these cases, the game
        will automatically deal out 3 extra cards until a set can be taken.
      </p>

      <p>
        If you ever get stuck and need a hint, click on
        <mwc-fab
          mini
          icon="lightbulb"
          label="Get Hint"
        ></mwc-fab>
        and one card will be marked like this one.
      </p>

      <sets-card
        interactive
        hint
        color="2"
        quantity="2"
        shape="0"
        opacity="1"
      ></sets-card>
    
      <mwc-icon-button slot="primaryAction" dialogAction="close" icon="done"></mwc-icon-button>
    </mwc-dialog>
  </lit-p2p>
</body>
</html>
